{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { Update_Radius, Fetch_User, SET_LOCATION, update_User, Progression_Bar } from \"../types\";\nimport { graphql, stripIgnoredCharacters } from 'graphql';\nimport axios from \"../../src/api/axios\";\nimport { getUserData, storeUserData } from \"../../src/components/localStorage\";\nexport var updateRadius = function updateRadius(radius) {\n  return function _callee(dispatch, getState) {\n    var _await$getUserData, token, body, res;\n\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(getUserData());\n\n          case 2:\n            _await$getUserData = _context.sent;\n            token = _await$getUserData.token;\n            console.log(\"in update radius\", radius);\n            body = {\n              query: \"\\n      mutation{\\n        updateRadius(radius: \" + parseInt(radius) + \"){\\n            firstName\\n            radius\\n            lastName\\n            email\\n            dob\\n        }\\n      }\\n      \"\n            };\n            _context.prev = 6;\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(axios.post(\"graphql?\", body, {\n              headers: {\n                'Authorization': \"Bearer \" + token\n              }\n            }));\n\n          case 9:\n            res = _context.sent;\n            dispatch({\n              type: Update_Radius,\n              payload: res.data.data.updateRadius.radius\n            });\n            return _context.abrupt(\"return\", Promise.resolve(res.data.data.updateRadius.radius));\n\n          case 14:\n            _context.prev = 14;\n            _context.t0 = _context[\"catch\"](6);\n            console.log(\"hte errorsss\", _context.t0.response.data);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[6, 14]], Promise);\n  };\n};\nexport var getUser = function getUser() {\n  return function _callee2(dispatch, getState) {\n    var _await$getUserData2, token, body, res;\n\n    return _regeneratorRuntime.async(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(getUserData());\n\n          case 2:\n            _await$getUserData2 = _context2.sent;\n            token = _await$getUserData2.token;\n            body = {\n              query: \"\\n      query{\\n        getUser{\\n            _id\\n            firstName\\n            lastName\\n            email\\n            dob\\n            radius\\n            profilePic\\n            gender\\n            accountType,\\n            phoneNumber\\n        }\\n      }\\n    \"\n            };\n            _context2.prev = 5;\n            _context2.next = 8;\n            return _regeneratorRuntime.awrap(axios.post(\"graphql?\", body, {\n              headers: {\n                'Authorization': \"Bearer \" + token\n              }\n            }));\n\n          case 8:\n            res = _context2.sent;\n            dispatch({\n              type: Fetch_User,\n              payload: res.data.data.getUser\n            });\n            return _context2.abrupt(\"return\", Promise.resolve('ok'));\n\n          case 13:\n            _context2.prev = 13;\n            _context2.t0 = _context2[\"catch\"](5);\n            console.log(\"hte errorsss\", _context2.t0.response);\n\n          case 16:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[5, 13]], Promise);\n  };\n};\nexport var updateUser = function updateUser(_ref) {\n  var existingEmail = _ref.existingEmail,\n      newEmail = _ref.newEmail,\n      firstName = _ref.firstName,\n      lastName = _ref.lastName,\n      date = _ref.date,\n      gender = _ref.gender,\n      profilePic = _ref.profilePic;\n  return function _callee3(dispatch, getState) {\n    var _await$getUserData3, token, applyNewEmail, body, res, errors, message;\n\n    return _regeneratorRuntime.async(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(getUserData());\n\n          case 2:\n            _await$getUserData3 = _context3.sent;\n            token = _await$getUserData3.token;\n            console.log(existingEmail + \" ,\" + newEmail + \", \" + firstName + \", \" + lastName + \", \" + date + \", \" + gender + \", \" + profilePic);\n            applyNewEmail = newEmail ? newEmail : \"notApply\";\n            console.log(\"apple new\", applyNewEmail);\n            body = {\n              query: \"\\n    mutation{\\n      updateUser(userInput: {newEmail: \\\"\" + applyNewEmail + \"\\\",\\n      existingEmail: \\\"\" + existingEmail + \"\\\",\\n      profilePic: \\\"\" + profilePic + \"\\\",\\n      firstName: \\\"\" + firstName + \"\\\", lastName: \\\"\" + lastName + \"\\\", \\n      , dob: \\\"\" + date + \"\\\",  gender: \\\"\" + gender + \"\\\"})\\n      {\\n        user{\\n          _id\\n          firstName\\n          radius\\n          lastName\\n          email\\n          dob\\n          accountType\\n          profilePic\\n          gender\\n          phoneNumber\\n        }\\n        isSameEmail\\n      }\\n    }\\n    \"\n            };\n            _context3.prev = 8;\n            _context3.next = 11;\n            return _regeneratorRuntime.awrap(axios.post('graphql?', body, {\n              headers: {\n                'Authorization': \"Bearer \" + token\n              }\n            }));\n\n          case 11:\n            res = _context3.sent;\n            console.log(\"after update\", res.data.data);\n\n            if (res.data.data.updateUser) {\n              dispatch({\n                type: update_User,\n                payload: res.data.data.updateUser.user\n              });\n              console.log(\"the is paswword chane\", res.data.data.updateUser.isSameEmail);\n            }\n\n            return _context3.abrupt(\"return\", res.data.data.updateUser.isSameEmail);\n\n          case 17:\n            _context3.prev = 17;\n            _context3.t0 = _context3[\"catch\"](8);\n            console.log(\"the erororr\", _context3.t0.response.data);\n            errors = _context3.t0.response.data.errors;\n            message = errors[0].message;\n            return _context3.abrupt(\"return\", Promise.reject(message));\n\n          case 23:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[8, 17]], Promise);\n  };\n};\nexport var setUserLocation = function setUserLocation(data) {\n  return function _callee4(dispatch, getState) {\n    return _regeneratorRuntime.async(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            dispatch({\n              type: SET_LOCATION,\n              payload: _objectSpread(_objectSpread({}, data), {}, {\n                latitude: data.latitude.toFixed(5),\n                longitude: data.longitude.toFixed(5)\n              })\n            });\n\n          case 1:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};\nexport var setProgressionBar = function setProgressionBar(data) {\n  return function _callee5(dispatch, getState) {\n    return _regeneratorRuntime.async(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            console.log(\"the bar\", data);\n            dispatch({\n              type: Progression_Bar,\n              payload: data\n            });\n\n          case 2:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n};","map":{"version":3,"sources":["/Users/abubakarakram/development/projects/backup bar peakk/client/redux/actions/User.js"],"names":["Update_Radius","Fetch_User","SET_LOCATION","update_User","Progression_Bar","graphql","stripIgnoredCharacters","axios","getUserData","storeUserData","updateRadius","radius","dispatch","getState","token","console","log","body","query","parseInt","post","headers","res","type","payload","data","Promise","resolve","response","getUser","updateUser","existingEmail","newEmail","firstName","lastName","date","gender","profilePic","applyNewEmail","user","isSameEmail","errors","message","reject","setUserLocation","latitude","toFixed","longitude","setProgressionBar"],"mappings":"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","sourcesContent":["import { Update_Radius, Fetch_User, SET_LOCATION, update_User, Progression_Bar, } from '../types'; \nimport { graphql, stripIgnoredCharacters } from 'graphql';\nimport axios from '../../src/api/axios';\nimport { getUserData , storeUserData} from '../../src/components/localStorage'; \n\nexport const updateRadius = (radius) => async (dispatch, getState) => {\n  const { token } = await getUserData();\n  console.log(\"in update radius\", radius)\n  const body = {\n      query:`\n      mutation{\n        updateRadius(radius: ${ parseInt(radius)}){\n            firstName\n            radius\n            lastName\n            email\n            dob\n        }\n      }\n      `\n    }\n  try{  \n    const res = await axios.post(`graphql?`,body,{ headers: {\n      'Authorization': `Bearer ${token}`\n    } });\n    dispatch({\n      type: Update_Radius,\n      payload: res.data.data.updateRadius.radius,\n    })\n    return Promise.resolve(res.data.data.updateRadius.radius);\n  }catch(err){\n    console.log(\"hte errorsss\", err.response.data)\n  }\n}\n\nexport const getUser = () => async (dispatch, getState) => {\n  const { token } = await getUserData();\n  const body = {\n    query:`\n      query{\n        getUser{\n            _id\n            firstName\n            lastName\n            email\n            dob\n            radius\n            profilePic\n            gender\n            accountType,\n            phoneNumber\n        }\n      }\n    ` \n  }\n  try{  \n    const res = await axios.post(`graphql?`,body,{ headers: {\n      'Authorization': `Bearer ${token}`\n    } });\n    dispatch({\n      type: Fetch_User,\n      payload: res.data.data.getUser,\n    })\n    return Promise.resolve('ok');\n  }catch(err){\n    console.log(\"hte errorsss\", err.response)\n  }\n}\n\nexport const updateUser = ({existingEmail,newEmail ,firstName, lastName, date, gender, profilePic}) => async (dispatch, getState) => {\n  const { token } = await getUserData();\n  console.log(`${existingEmail} ,${newEmail}, ${firstName}, ${lastName}, ${date}, ${gender}, ${profilePic}`);\n  \n  let applyNewEmail = newEmail ? newEmail : \"notApply\"\n  console.log(\"apple new\", applyNewEmail)\n  const body = {\n    query: `\n    mutation{\n      updateUser(userInput: {newEmail: \"${applyNewEmail}\",\n      existingEmail: \"${existingEmail}\",\n      profilePic: \"${profilePic}\",\n      firstName: \"${firstName}\", lastName: \"${lastName}\", \n      , dob: \"${date}\",  gender: \"${gender}\"})\n      {\n        user{\n          _id\n          firstName\n          radius\n          lastName\n          email\n          dob\n          accountType\n          profilePic\n          gender\n          phoneNumber\n        }\n        isSameEmail\n      }\n    }\n    `\n  }\n  try{\n  const res = await axios.post('graphql?',body,{ headers: {\n    'Authorization': `Bearer ${token}`\n  }})\n    console.log(\"after update\", res.data.data);\n    if(res.data.data.updateUser){\n      dispatch({\n        type: update_User,\n        payload: res.data.data.updateUser.user,\n      })\n      console.log(\"the is paswword chane\", res.data.data.updateUser.isSameEmail)\n    }\n    return (res.data.data.updateUser.isSameEmail) \n  }\n  catch(err){\n    console.log(\"the erororr\", err.response.data)\n    const { errors } = err.response.data;\n    const { message } = errors[0];\n    return Promise.reject(message) \n  }\n}\n\nexport const setUserLocation = (data) => async (dispatch, getState) => {\n  dispatch({\n    type: SET_LOCATION,\n    payload: {...data,\n      latitude: data.latitude.toFixed(5),\n      longitude: data.longitude.toFixed(5) \n    }\n  })\n}\nexport const setProgressionBar = (data) => async (dispatch, getState) => {\n  console.log(\"the bar\", data)\n  dispatch({\n    type: Progression_Bar,\n    payload: data\n  })\n}\n\n\n"]},"metadata":{},"sourceType":"module"}