{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/abubakarakram/development/projects/backup bar peakk/client/src/components/SignupComponent.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport DateTimePickerModal from \"react-native-modal-datetime-picker\";\nimport moment from 'moment';\nimport Spinner from 'react-native-loading-spinner-overlay';\nimport axios from \"../api/axios\";\nimport { storeUserData } from \"../components/localStorage\";\nimport { showMessage, hideMessage } from \"react-native-flash-message\";\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scrollview';\nimport RNPickerSelect from 'react-native-picker-select/src';\nimport { getUser } from \"../../redux/actions/User\";\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport AlertComponent from \"../components/AlertComponent\";\nimport DatePicker from \"./DatePicker\";\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar shadowOpt = {\n  width: 160,\n  height: 170,\n  color: \"rgba(0, 0, 0, 0.05)\",\n  border: 2,\n  inset: true,\n  style: {\n    marginVertical: 5\n  }\n};\n\nvar createTwoButtonAlert = function createTwoButtonAlert(message) {\n  return Alert.alert(\"Error\", message, [{\n    text: \"Cancel\",\n    onPress: function onPress() {\n      return console.log(\"Cancel Pressed\");\n    },\n    style: \"cancel\"\n  }, {\n    text: \"OK\",\n    onPress: function onPress() {\n      return console.log(\"OK Pressed\");\n    }\n  }], {\n    cancelable: true\n  });\n};\n\nvar SignUpComponent = function (_React$Component) {\n  _inherits(SignUpComponent, _React$Component);\n\n  var _super = _createSuper(SignUpComponent);\n\n  function SignUpComponent(props) {\n    var _this;\n\n    _classCallCheck(this, SignUpComponent);\n\n    _this = _super.call(this, props);\n\n    _this.onChangeText = function (key, val) {\n      _this.setState(_defineProperty({}, key, val));\n    };\n\n    _this.changeDate = function (date) {\n      _this.setState({\n        date: moment(date).format(\"YYYY-MM-DD\"),\n        showPicker: false\n      });\n\n      setTimeout(function () {\n        return _this.setState({\n          showPicker: false\n        });\n      }, 1300);\n    };\n\n    _this.sendEmail = function _callee(userId) {\n      var body, sendEmail;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              body = {\n                userId: userId\n              };\n              console.log(\"the body\", body);\n              _context.prev = 2;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(axios.post('sendEmailVerification', body));\n\n            case 5:\n              sendEmail = _context.sent;\n              return _context.abrupt(\"return\", sendEmail);\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(\"the error\", _context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[2, 9]], Promise);\n    };\n\n    _this.validate = function () {\n      var errors = {};\n      var isValid = true;\n\n      if (!_this.state.gender) {\n        isValid = false;\n        errors[\"gender\"] = \"Please input gender\";\n      }\n\n      if (!_this.state.firstName) {\n        isValid = false;\n        errors[\"firstName\"] = \"Please input first Name\";\n      }\n\n      if (!_this.state.lastName) {\n        isValid = false;\n        errors[\"lastName\"] = \"Please input last Name\";\n      }\n\n      if (!_this.state.date) {\n        isValid = false;\n        errors[\"date\"] = \"Please input you Birthday\";\n      }\n\n      if (!_this.state.email) {\n        isValid = false;\n        errors[\"email\"] = \"Please input your email\";\n      }\n\n      if (isValid) {\n        return true;\n      }\n\n      _this.setState({\n        errors: errors\n      });\n\n      return false;\n    };\n\n    _this.signUp = function () {\n      if (_this.validate()) {\n        _this.setState({\n          spinner: true\n        });\n\n        var _this$props = _this.props,\n            navigation = _this$props.navigation,\n            phoneNumber = _this$props.phoneNumber;\n        var accountType = _this.props.user ? 'social' : \"app\";\n        var finalPhoneNumber = accountType === \"app\" ? phoneNumber : null;\n        var body = {\n          query: \"\\n        mutation{\\n          createUser(userInput: {email: \\\"\" + _this.state.email + \"\\\",\\n          firstName: \\\"\" + _this.state.firstName + \"\\\", lastName: \\\"\" + _this.state.lastName + \"\\\",\\n          gender: \\\"\" + _this.state.gender + \"\\\", \\n          dob: \\\"\" + _this.state.date + \"\\\", accountType: \\\"\" + accountType + \"\\\", phoneNumber: \\\"\" + finalPhoneNumber + \"\\\"})\\n          {\\n            token\\n            user{\\n              _id\\n              firstName\\n              radius\\n              lastName\\n              email\\n              dob\\n              phoneNumber\\n            }\\n          }\\n        }\\n        \"\n        };\n        axios.post('graphql?', body).then(function _callee2(res) {\n          var user, getEmail;\n          return _regeneratorRuntime.async(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (!res.data.data.createUser) {\n                    _context2.next = 11;\n                    break;\n                  }\n\n                  storeUserData(res.data.data.createUser);\n\n                  _this.props.closeModal();\n\n                  _context2.next = 5;\n                  return _regeneratorRuntime.awrap(_this.props.getUser());\n\n                case 5:\n                  user = _context2.sent;\n                  _context2.next = 8;\n                  return _regeneratorRuntime.awrap(_this.sendEmail(res.data.data.createUser.user._id));\n\n                case 8:\n                  getEmail = _context2.sent;\n\n                  _this.setState({\n                    spinner: false\n                  });\n\n                  if (user === 'ok') navigation.navigate('HomeApp');\n\n                case 11:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, null, null, null, Promise);\n        }).catch(function (err) {\n          console.log(\"the error in sign up\", err);\n          var errors = err.response.data.errors;\n          var message = errors[0].message;\n          console.log(\"the error\", errors);\n\n          _this.setState({\n            spinner: false,\n            message: message,\n            showError: true\n          });\n        });\n      }\n    };\n\n    _this.state = {\n      date: new Date(),\n      showPicker: false,\n      email: null,\n      firstName: null,\n      lastName: null,\n      showAlert: true,\n      message: \"\",\n      showError: false,\n      gender: null,\n      errors: {}\n    };\n    return _this;\n  }\n\n  _createClass(SignUpComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(\"the passing data\", this.props);\n\n      if (this.props.user) {\n        var _this$props$user = this.props.user,\n            email = _this$props$user.email,\n            firstName = _this$props$user.firstName,\n            lastName = _this$props$user.lastName;\n        this.setState({\n          email: email,\n          firstName: firstName,\n          lastName: lastName\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var errors = this.state.errors;\n      return React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 7\n        }\n      }, this.state.showError && React.createElement(AlertComponent, {\n        showError: this.state.showError,\n        message: this.state.message,\n        closeModal: function closeModal() {\n          return _this2.setState({\n            showError: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }\n      }), React.createElement(Text, {\n        style: {\n          color: \"black\",\n          fontSize: 20,\n          marginBottom: 20,\n          fontWeight: \"500\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 9\n        }\n      }, \"Finish Signing Up \"), React.createElement(View, {\n        style: styles.inputForm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 9\n        }\n      }, React.createElement(ScrollView, {\n        contentContainerStyle: {\n          justifyContent: \"flex-end\"\n        },\n        style: {\n          backgroundColor: 'white',\n          width: '80%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }\n      }, React.createElement(KeyboardAwareScrollView, {\n        style: {\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }\n      }, React.createElement(TextInput, {\n        style: [pickerSelectStyles.inputIOS],\n        placeholder: \"First Name\",\n        placeholderTextColor: \"#003f5c\",\n        onChangeText: function onChangeText(val) {\n          return _this2.onChangeText('firstName', val);\n        },\n        value: this.state.firstName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 15\n        }\n      }), React.createElement(TextInput, {\n        style: styles.customInputText,\n        placeholder: \"Last Name\",\n        placeholderTextColor: \"#003f5c\",\n        onChangeText: function onChangeText(val) {\n          return _this2.onChangeText('lastName', val);\n        },\n        value: this.state.lastName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 15\n        }\n      }), React.createElement(Text, {\n        style: {\n          color: 'red',\n          fontSize: 16,\n          marginTop: 3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 15\n        }\n      }, errors && errors.firstName), React.createElement(Text, {\n        style: {\n          color: 'red',\n          fontSize: 16,\n          marginTop: 3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 15\n        }\n      }, errors && errors.lastName), React.createElement(View, {\n        style: styles.inputView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 15\n        }\n      }, React.createElement(DatePicker, {\n        onChange: function onChange(date) {\n          _this2.changeDate(date);\n        },\n        dob: null,\n        value: this.state.date,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 17\n        }\n      })), React.createElement(Text, {\n        style: {\n          color: 'red',\n          fontSize: 16,\n          marginTop: 3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }\n      }, errors && errors.date), React.createElement(Text, {\n        style: styles.ageInfoText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 15\n        }\n      }, \"To Sign up, you need to be atleast 21.Your birthday won't be shared with other people who use Bar Peak\"), React.createElement(View, {\n        style: styles.inputView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 15\n        }\n      }, React.createElement(TextInput, {\n        style: styles.inputText,\n        placeholder: \"Email\",\n        ref: \"email\",\n        placeholderTextColor: \"#003f5c\",\n        value: this.state.email,\n        onChangeText: function onChangeText(val) {\n          return _this2.onChangeText('email', val);\n        },\n        editable: this.props.user ? false : true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 17\n        }\n      })), React.createElement(Text, {\n        style: {\n          color: 'red',\n          fontSize: 16,\n          marginTop: 3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }\n      }, errors && errors.email), this.props.user && React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 18\n        }\n      }, React.createElement(Text, {\n        style: {\n          lineHeight: 14,\n          marginTop: 10\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 19\n        }\n      }, \"This info came from \", this.props.user && this.props.user.socialSource, \" and not editable.\")), React.createElement(View, {\n        style: [styles.inputView, {\n          padding: 0,\n          paddingLeft: 20\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 15\n        }\n      }, React.createElement(RNPickerSelect, {\n        style: [styles.inputText],\n        onValueChange: function onValueChange(value) {\n          return console.log(value);\n        },\n        placeholderTextColor: \"black\",\n        placeholder: {\n          label: 'Please Select Your Gender',\n          value: 'female',\n          color: 'black'\n        },\n        items: [{\n          label: 'Female',\n          value: 'female',\n          color: 'black'\n        }, {\n          label: 'Male',\n          value: 'male'\n        }, {\n          label: 'Other',\n          value: 'other'\n        }],\n        onValueChange: function onValueChange(value) {\n          _this2.setState({\n            gender: value\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 17\n        }\n      })), React.createElement(Text, {\n        style: {\n          color: 'red',\n          fontSize: 16,\n          marginTop: 3\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 15\n        }\n      }, errors && errors.gender), React.createElement(TouchableOpacity, {\n        style: styles.acceptButton,\n        onPress: function onPress() {\n          _this2.signUp();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.SignUpText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 17\n        }\n      }, \"Accept and Continue\"))))), React.createElement(Spinner, {\n        visible: this.state.spinner,\n        textContent: 'Loading...',\n        textStyle: styles.spinnerTextStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return SignUpComponent;\n}(React.Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getUser: getUser\n  }, dispatch);\n};\n\nexport default connect(null, mapDispatchToProps)(SignUpComponent);\nvar styles = StyleSheet.create({\n  ageInfoText: {\n    lineHeight: 16,\n    marginTop: 10,\n    color: 'gray',\n    fontSize: 12,\n    fontWeight: \"300\"\n  },\n  acceptButton: {\n    alignSelf: 'center',\n    backgroundColor: 'black',\n    marginTop: '10%',\n    borderRadius: 10,\n    width: \"100%\",\n    paddingTop: 5,\n    paddingBottom: 5\n  },\n  SignUpText: {\n    fontSize: 18,\n    color: 'white',\n    paddingTop: 15,\n    paddingBottom: 15,\n    textAlign: 'center'\n  },\n  spinnerTextStyle: {\n    color: '#FFF'\n  },\n  inputForm: {\n    backgroundColor: '#ffffff',\n    alignItems: 'center',\n    margin: 0,\n    borderWidth: 0,\n    width: '100%',\n    height: height * 0.8\n  },\n  ImageLogo: {\n    width: '35%',\n    height: '15%',\n    marginBottom: \"5%\",\n    backgroundColor: 'white',\n    marginTop: '15%'\n  },\n  inputView: {\n    width: \"100%\",\n    borderRadius: 7,\n    borderWidth: 0.5,\n    height: 50,\n    marginTop: height * 0.04,\n    marginLeft: 0,\n    justifyContent: \"center\",\n    padding: 20\n  },\n  inputText: {\n    height: 50,\n    color: \"black\"\n  },\n  customInputText: {\n    color: \"gray\",\n    borderWidth: 0.5,\n    paddingLeft: 10,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingTop: 20,\n    paddingBottom: 20\n  },\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: \"center\",\n    margin: 0,\n    borderWidth: 0\n  }\n});\nvar pickerSelectStyles = StyleSheet.create({\n  inputIOS: {\n    fontSize: 14,\n    paddingVertical: 20,\n    paddingHorizontal: 10,\n    borderWidth: 1,\n    borderBottomWidth: 0.2,\n    borderColor: 'gray',\n    borderRadius: 8,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 0,\n    width: \"100%\",\n    color: 'gray',\n    paddingRight: 0\n  }\n});","map":{"version":3,"sources":["/Users/abubakarakram/development/projects/backup bar peakk/client/src/components/SignupComponent.js"],"names":["React","DateTimePickerModal","moment","Spinner","axios","storeUserData","showMessage","hideMessage","KeyboardAwareScrollView","RNPickerSelect","getUser","connect","bindActionCreators","AlertComponent","DatePicker","Dimensions","get","width","height","shadowOpt","color","border","inset","style","marginVertical","createTwoButtonAlert","message","Alert","alert","text","onPress","console","log","cancelable","SignUpComponent","props","onChangeText","key","val","setState","changeDate","date","format","showPicker","setTimeout","sendEmail","userId","body","post","validate","errors","isValid","state","gender","firstName","lastName","email","signUp","spinner","navigation","phoneNumber","accountType","user","finalPhoneNumber","query","then","res","data","createUser","closeModal","_id","getEmail","navigate","catch","err","response","showError","Date","showAlert","styles","container","fontSize","marginBottom","fontWeight","inputForm","justifyContent","backgroundColor","flex","pickerSelectStyles","inputIOS","customInputText","marginTop","inputView","ageInfoText","inputText","lineHeight","socialSource","padding","paddingLeft","value","label","acceptButton","SignUpText","spinnerTextStyle","Component","mapDispatchToProps","dispatch","StyleSheet","create","alignSelf","borderRadius","paddingTop","paddingBottom","textAlign","alignItems","margin","borderWidth","ImageLogo","marginLeft","borderBottomLeftRadius","borderBottomRightRadius","paddingVertical","paddingHorizontal","borderBottomWidth","borderColor","paddingRight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, TextInput, View, Image, TouchableOpacity, Text, KeyboardAvoidingView , ScrollView, Alert, Modal, Dimensions} from 'react-native';\nimport DateTimePickerModal from \"react-native-modal-datetime-picker\";\nimport moment from 'moment';\nimport Spinner from 'react-native-loading-spinner-overlay';\nimport axios from '../api/axios';\nimport {storeUserData} from '../components/localStorage';\nimport { showMessage, hideMessage } from \"react-native-flash-message\";\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scrollview';\nimport RNPickerSelect from 'react-native-picker-select/src';  \nimport { getUser } from '../../redux/actions/User';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport AlertComponent from '../components/AlertComponent';\nimport DatePicker from './DatePicker';\nconst { width, height } = Dimensions.get(\"window\");\n\nconst shadowOpt = {\n  width:160,\n  height:170,\n  color:\"rgba(0, 0, 0, 0.05)\",\n  border:2,\n  inset: true,\n  style:{marginVertical:5}\n}\n\nconst createTwoButtonAlert = (message) =>\n  Alert.alert(\n    \"Error\",\n    message,\n    [\n      {\n        text: \"Cancel\",\n        onPress: () => console.log(\"Cancel Pressed\"),\n        style: \"cancel\"\n      },\n      { text: \"OK\", onPress: () => console.log(\"OK Pressed\") }\n    ],\n    { cancelable: true }\n);\n\n// const keyboardVerticalOffset = Platform.OS === 'ios' ? 200 : 0\n\nclass SignUpComponent extends React.Component {\n\t\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state = {\n      date : new Date(), \n      showPicker: false,\n      email: null,\n      firstName: null,\n      lastName: null,\n      showAlert: true,\n      message: \"\",\n      showError: false,\n      gender: null,\n      errors: {}\n    }\n\t}\n\n\tcomponentDidMount(){\n    console.log(\"the passing data\", this.props );\n\n    if(this.props.user){\n      const {email, firstName, lastName} = this.props.user;\n      this.setState({ email, firstName, lastName  })\n    }\n  }\n  \n  onChangeText = (key, val) => {\n    this.setState({ [key]: val })\n  }\n\n  changeDate = (date) => {\n    this.setState({ date: moment(date).format(\"YYYY-MM-DD\"), showPicker: false })\n    setTimeout(()=>  this.setState({ showPicker: false }) , 1300)\n  }\n\n  sendEmail = async(userId) => {\n    const body = {\n      userId\n    }\n    console.log(\"the body\", body)\n    try{\n      const sendEmail = await axios.post('sendEmailVerification', body);\n      return sendEmail\n    }catch(err){\n      console.log(\"the error\", err)\n    }\n  }\n\n  validate = () => {\n    let errors = {}\n    let isValid = true;\n   \n    if(!this.state.gender){\n      isValid = false;\n      errors[\"gender\"] = \"Please input gender\"\n    }\n    if(!this.state.firstName){\n      isValid = false;\n      errors[\"firstName\"] = \"Please input first Name\"\n    }\n    if(!this.state.lastName){\n      isValid = false;\n      errors[\"lastName\"] = \"Please input last Name\"\n    }\n    if(!this.state.date){\n      isValid = false;\n      errors[\"date\"] = \"Please input you Birthday\"\n    }\n    if(!this.state.email){\n      isValid = false;\n      errors[\"email\"] = \"Please input your email\"\n    }\n    \n    if(isValid){\n      return true\n    }\n    this.setState({ errors })\n    return false\n  }\n\n  signUp = () => {\n    if(this.validate()){\n      this.setState({ spinner: true })\n      const {navigation, phoneNumber} = this.props;\n      let accountType = this.props.user ? 'social' : \"app\";\n      let finalPhoneNumber = accountType === \"app\" ? phoneNumber : null\n      const body = {\n        query: `\n        mutation{\n          createUser(userInput: {email: \"${this.state.email}\",\n          firstName: \"${this.state.firstName}\", lastName: \"${this.state.lastName}\",\n          gender: \"${this.state.gender}\", \n          dob: \"${this.state.date}\", accountType: \"${accountType}\", phoneNumber: \"${finalPhoneNumber}\"})\n          {\n            token\n            user{\n              _id\n              firstName\n              radius\n              lastName\n              email\n              dob\n              phoneNumber\n            }\n          }\n        }\n        `\n      }\n      \n    axios.post('graphql?',body).then( async (res)=>{\n      if(res.data.data.createUser){\n        storeUserData(res.data.data.createUser)\n        this.props.closeModal();\n        const user = await this.props.getUser();\n        const getEmail = await this.sendEmail(res.data.data.createUser.user._id)\n        this.setState({ spinner: false })\n        if(user === 'ok')\n          navigation.navigate('HomeApp');\n      }\n        \n      }).catch(err =>{\n        console.log(\"the error in sign up\", err);\n        const { errors } = err.response.data;\n        const { message } = errors[0];\n        console.log(\"the error\", errors) \n        this.setState({ spinner: false, message, showError: true })\n      })\n    }\n  }\n\n  \n\trender(){\n    const { errors } = this.state;\n\n\t\treturn (\n      <View style = {styles.container} >\n       \n        { this.state.showError && \n          <AlertComponent \n            showError = {this.state.showError}  \n            message = {this.state.message} \n            closeModal = { ()=> this.setState({ showError: false  }) }  \n          />\n        }\n        <Text style = {{ color: \"black\", fontSize: 20, marginBottom: 20, fontWeight: \"500\" }} >Finish Signing Up </Text>\n        <View style = {styles.inputForm} >\n          \n          <ScrollView  \n            contentContainerStyle = {{justifyContent: \"flex-end\"}}\n            style = {{ backgroundColor: 'white', width: '80%'}}>\n           \n            <KeyboardAwareScrollView  \n              style ={{ flex:1}} \n            >       \n              <TextInput\n                style={[ pickerSelectStyles.inputIOS]}\n                placeholder=\"First Name\"\n                placeholderTextColor=\"#003f5c\"\n                onChangeText={val => this.onChangeText('firstName', val)}\n                value = {this.state.firstName}\n              />      \n              <TextInput\n                style={styles.customInputText}\n                placeholder=\"Last Name\"\n                placeholderTextColor=\"#003f5c\"\n                onChangeText={val => this.onChangeText('lastName', val)}\n                value = {this.state.lastName}\n              />\n              <Text style = {{ color: 'red', fontSize: 16, marginTop: 3 }} >{  errors && errors.firstName }</Text>\n              <Text style = {{ color: 'red', fontSize: 16, marginTop: 3 }} >{  errors && errors.lastName }</Text>\n              <View style={styles.inputView} >\n                <DatePicker \n                  onChange = { (date)=> { \n                    this.changeDate(date)\n                  }}\n                  dob = {null}\n                  value = { this.state.date  } \n                />    \n              </View>\n              <Text style = {{ color: 'red', fontSize: 16, marginTop: 3 }} >{  errors && errors.date }</Text>\n              <Text style = {styles.ageInfoText} >\n                To Sign up, you need to be atleast 21.Your birthday won't be shared with other people who use Bar Peak\n              </Text>\n              <View style={styles.inputView} >\n                <TextInput\n                  style={ styles.inputText }\n                  placeholder=\"Email\"\n                  ref= \"email\"\n                  placeholderTextColor=\"#003f5c\"\n                  value = {this.state.email}\n                  onChangeText={val => this.onChangeText('email', val)}\n                  editable={ this.props.user ? false : true   }\n                />\n              </View>\n              <Text style = {{ color: 'red', fontSize: 16, marginTop: 3 }} >{  errors && errors.email }</Text>\n              { this.props.user &&\n                (<View > \n                  <Text style = {{lineHeight: 14, marginTop: 10}} >This info came from {this.props.user &&  this.props.user.socialSource} and not editable.</Text>\n                </View>\n                )\n              }\n              <View style = { [styles.inputView, { padding: 0, paddingLeft: 20 }] } >\n                <RNPickerSelect\n                  style={[styles.inputText ]}\n                  onValueChange={(value) => console.log(value)}\n                  placeholderTextColor=\"black\"\n\n                  placeholder = {\n                    { label: 'Please Select Your Gender', value: 'female', color: 'black' }\n                  }\n                  items={[\n                      { label: 'Female', value: 'female', color: 'black' },\n                      { label: 'Male', value: 'male' },\n                      { label: 'Other', value: 'other' },\n                  ]}\n                  onValueChange={(value) => {\n                    this.setState({ gender: value })\n                  }}\n                />\n              </View>\n              <Text style = {{ color: 'red', fontSize: 16, marginTop: 3 }} >{  errors && errors.gender }</Text>\n              <TouchableOpacity style={styles.acceptButton} onPress = { ()=>{this.signUp()} } >\n                <Text style={styles.SignUpText}>Accept and Continue</Text>\n              </TouchableOpacity>\n            </KeyboardAwareScrollView>\n           </ScrollView>     \n        </View>\n        <Spinner\n          visible={this.state.spinner}\n          textContent={'Loading...'}\n          textStyle={styles.spinnerTextStyle}\n        />\n      </View>\n    )\n\t}\n}\n\nconst mapDispatchToProps = dispatch => (\n  bindActionCreators({\n    getUser\n  }, dispatch)\n);\n\nexport default connect(null, mapDispatchToProps)(SignUpComponent);\n\nconst styles = StyleSheet.create({\n  ageInfoText: {\n    lineHeight: 16, \n    marginTop: 10, \n    color: 'gray',\n    fontSize: 12,\n    fontWeight: \"300\"\n  },\n  acceptButton: { \n    alignSelf: 'center' ,\n    backgroundColor: 'black', \n    marginTop: '10%', \n    borderRadius: 10,\n    width: \"100%\",\n    paddingTop: 5,\n    paddingBottom: 5\n  },\n  SignUpText: {\n    fontSize: 18,\n    color: 'white',\n    paddingTop: 15,\n    paddingBottom: 15,\n    textAlign: 'center'\n  },\n  spinnerTextStyle: {\n    color: '#FFF'\n  },\n  inputForm: {\n    \n    backgroundColor: '#ffffff',\n    alignItems: 'center',\n    margin: 0,\n    borderWidth: 0,\n    width: '100%',\n    height: height * 0.8\n  },\n  ImageLogo:{\n    width: '35%',\n    height: '15%',\n    marginBottom: \"5%\",\n    backgroundColor: 'white',\n    marginTop: '15%'\n  },\n  inputView: {\n    width: \"100%\",\n    //  backgroundColor: \"#465881\",\n    borderRadius: 7,\n    borderWidth: 0.5,\n    height: 50,\n    // marginTop: 50,\n    marginTop: height * 0.04,\n    marginLeft: 0,\n    justifyContent: \"center\",\n    padding: 20\n  },\n  inputText: {\n    height: 50,\n    color: \"black\"\n  },\n  customInputText: {\n    color: \"gray\",\n    borderWidth:0.5, \n    paddingLeft: 10,\n    borderBottomLeftRadius: 8,\n    borderBottomRightRadius: 8,\n    paddingTop: 20,\n    paddingBottom: 20\n  },\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: \"center\",\n    margin: 0,\n    borderWidth: 0\n  }\n}) \n\nconst pickerSelectStyles = StyleSheet.create({\n  inputIOS: {\n    fontSize: 14,\n    paddingVertical: 20,\n    paddingHorizontal: 10,\n    borderWidth: 1,\n    borderBottomWidth:0.2,\n    borderColor: 'gray',\n    borderRadius: 8,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 0,\n    width: \"100%\",\n    color: 'gray',\n    paddingRight: 0, // to ensure the text is never behind the icon\n  }\n});"]},"metadata":{},"sourceType":"module"}